================================== 
BLOCKERS for the 2.6.3 release
----------------------------------

===================
RELEASE REGRESSION TEST
-------------------

-------------------
AUTOMATED RELEASE
edit the first line, save this file, then paste into a terminal...
-------------------
### TOUCH HTACCESS, make it 777
Is /images/photos/upload/ being created?


VERSION='2.6.3b6' # <-- EDIT THIS
sed -i '' "/this..version/s/'.*'/'$VERSION'/" main.inc
grep -lIr . . | grep -v '\.svn' | # no binary, no svn
xargs sed "1,10 s/@\(\W*\)version\W*[0-9.a-z]\+/@\1version $VERSION/" -i

svn commit -m "Releasing version $VERSION"
phpdoc -c phpdoc.ini
rsync --delete -ave ssh ../docs fulldecent,fdcl@web.sf.net:htdocs
BASE=$PWD
pushd $(mktemp -d)
echo "<?php \$VERSION=\"$VERSION\" ?>" > version.php
rsync -ave ssh version.php fulldecent,fdcl@web.sf.net:htdocs
rm version.php
mkdir $VERSION
cd $VERSION
svn export $BASE cameralife
touch cameralife/deleted.log
chmod 777 cameralife/ cameralife/images/ cameralife/images/* cameralife/modules/ cameralife/deleted.log
zip -r cameralife-${VERSION}.zip cameralife/
tar -czf cameralife-${VERSION}.tgz cameralife/
tar -cjf cameralife-${VERSION}.tar.bz2 cameralife/
rm -rf cameralife
cd ..
scp -r "$VERSION" fulldecent,fdcl@frs.sourceforge.net:'/home/frs/project/f/fd/fdcl/Camera\ Life/'
rm -rf cameralife-*
popd

#GOTO  https://sourceforge.net/project/admin/explorer.php?group_id=70910
#  move folder into Camera Life directory
#  edit files to add properties
#GOTO  http://freshmeat.net/projects/fdcl/releases/new
#MAIL people in the MAILINGLIST file

===========================
----------------------------

  Remove support for strip slashes

  Core modules
!   modules/core/search.class.inc - Folder sorting based on time photo taken

  Remove content negotiation assumption from iconsets

  Light theme
    Sorting/ paging
!   Automatically choose a preview size a la Picasa Web, killer feature
    Accelerator keys, left, right
    Make Theme->AssetURL work if content negotiation is off
    User can choose image size, persistent - Jack Snodgrass

! Update PhotoStores for separate photos and CL data
    Abstract and add video support
    Make a DatabasePhotoStore
    Any other API updates
      move Image stuff in Photo further out into ImageProcessing (???)
    Create Theme developer assistant
!   Theme bounty for iPod Nano

! Focus on security 
    find . -follow \( -name ".svn" \) -prune -o -print | xargs grep -Hn //TODO
    grep GET  -r modules/theme/*/*inc
    grep PHP_SELF  -r modules/theme/*/*inc
    grep Database -r modules/theme/*/*inc
    grep '\./' */*php | grep -v requ
    harden against malicio us user inputs and sql inj ection -- you like that anti-grep obfuscation?
    check for inputs as arrays!
    fuzz testing
    PHP E_ALL strict?
    VALID HTML STRICT!!!
    Check all inputs
    Each CL install gets random secret number. All requests hash against secret. Protect XSRF
      Is this a differentiator? Put on "Compare Us" page versus Picasa, Gallery, ...
      Hash implementation -- http://pajhome.org.uk/crypt/md5/auth.html -- http://www.owasp.org/index.php/Main_Page -- http://www.owasp.org/index.php/Philadelphia
    When receiving the form, validate the hash.
    Login via OpenID / Facebook / Google / ...

  Upload photos 
    via email - http://www.phpclasses.org/browse/file/3.html
    HTML5 drag-n-drop file upload

  Update database
    Normalize all metadata to one table
      Beware the flickr hack for export/restore
    Change audit trail
    Update audit trail admin interface
    Picasa compatibility - for photo modification string?
    Update photos.mtime, make it photos."filter" like Picasa ???
    Enumerate the photos.status and other columns

  Integrate with facebook
    send photos to facebook
    retrieve comments from facebook
    retrieve tags / who is in the photo from Facebook, 
    put into hacks/

?? Integrate with Picasa or iPhone or Facebook for face recognition




  http://gallery.menalto.com/wiki/Most_Requested_Features

  Hacks
    hacks/rename.php - allow it to work on all files in a given path

BETTER CACHING
--php
$if_modified_since = preg_replace('/;.*$/', '', $HTTP_IF_MODIFIED_SINCE);

$mtime = filemtime($SCRIPT_FILENAME);
$gmdate_mod = gmdate('D, d M Y H:i:s', $mtime) . ' GMT';

if ($if_modified_since == $gmdate_mod) {
    header("HTTP/1.0 304 Not Modified");
    exit;
}
header("Last-Modified: $gmdate_mod");
--

  Make a module API compare to theme-info.php
    Gallery theme compatibility
  i18n
  This will use a modification string like in picasa.ini
    Add a photo modification optimization engine to photo.class.php
    It takes the existing photo and filter
    Considers the new filter
    Deletes stale caches
    Acts in the best possible way
    Rotate existing photo
    Or start from scratch
    Chooses to work off original or scaled image
    Result: editing a photo will not require modifying the full sized image (takes forever) unless the user loads that full size image, in which case it is cached.
    Admin may update these cache at their whim via the Update Database in Files in Admin
  
  Move to Google Code Hosting
    Add everything as a ticket
    Edit code to point to new wiki
    http://cameralife.org
    Freshmeat
    Use analytics


========================
  RELEASE GUIDE - Regression testing
------------------------

Check main theme in MSIE
http://fdcl.sourceforge.net/wiki/index.php?title=Special:RecentChanges&feed=rss
Try to upload a non-image
OpenSearch: http://friendfeed.com/bgolub/5e56afb1/i-like-how-google-chrome-deals-with-opensearch
Microformats: http://microformats.org/wiki/rel-tag
Validate all HTML and CSS
RSS: http://validator.w3.org/feed/check.cgi?url=camera.phor.net/rss.php%3Fq%3Dwill
Try all the hacks
mysqldump fdcl -d > setup/install.mysql # and add insert statements
Test Amazon S3 http://github.com/technoweenie/parkplace
Gallery API

